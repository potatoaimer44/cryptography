<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîê Secure E-Voting System</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        section { margin-bottom: 20px; }
        .error { color: red; }
        .success { color: green; }
        #authSection { display: block; }
        #ballotSection { display: none; }
    </style>
</head>
<body>
    <header>
        <h1>üîê Secure E-Voting System</h1>
        <p>PKI-Based Electronic Voting with Authentication, Integrity & Transparency</p>
    </header>

    <nav>
        <a href="#registration">Registration</a>
        <a href="#voting">Voting</a>
        <a href="/admin">Admin Panel</a>
        <a href="#ledger">Public Ledger</a>
        <a href="#verification">Verification</a>
    </nav>

    <section id="registrationSection">
        <h2>üÜî Voter Registration & Key Generation</h2>
        <form id="registrationForm">
            <h3>Step 1: Generate Key Pair</h3>
            <label>Full Name: <input id="nameInput" type="text" required></label><br>
            <label>Email: <input id="emailInputReg" type="email" required></label><br>
            <label>Password: <input id="passwordInputReg" type="password" required></label><br>
            <label>Voter ID: <input id="voterIDInput" type="text" required></label><br>
            <label>Key Size:
                <select id="keySizeSelect">
                    <option value="2048">RSA-2048 (Recommended)</option>
                    <option value="3072">RSA-3072 (High Security)</option>
                    <option value="4096">RSA-4096 (Maximum Security)</option>
                </select>
            </label><br>
            <button type="button" onclick="generateKeyPair()">Generate Key Pair</button>
            <button type="button" onclick="requestCertificate()">Request Certificate</button>
        </form>
        <div id="keyInfo">
            <h3>Step 2: Key Information</h3>
            <pre id="privateKeyOutput"></pre>
            <pre id="publicKeyOutput"></pre>
        </div>
    </section>

    <section id="votingSection">
        <h2>üó≥Ô∏è Cast Your Vote</h2>
        <div id="voteStatus"></div>
        <div id="voteReceipt"></div>
        <form id="authForm">
            <h3>Authentication Required</h3>
            <label>Email: <input id="emailInput" type="email" required></label><br>
            <label>Password: <input id="passwordInput" type="password" required></label><br>
            <label>Private Key (for signing): <textarea id="privateKeyInput" required></textarea></label><br>
            <button type="button" onclick="authenticate()">Authenticate</button>
        </form>
        <form id="ballotSection" style="display: none;">
            <h3>2024 Presidential Election Ballot</h3>
            <p>Instructions: Select one candidate. Your vote will be encrypted and anonymized.</p>
            <label>
                <input type="radio" name="vote" value="John Smith">
                <strong>John Smith (Democratic Party)</strong><br>
                Experience in public service, focus on education and healthcare
            </label><br>
            <label>
                <input type="radio" name="vote" value="Sarah Johnson">
                <strong>Sarah Johnson (Republican Party)</strong><br>
                Business background, emphasis on economy and security
            </label><br>
            <label>
                <input type="radio" name="vote" value="Michael Brown">
                <strong>Michael Brown (Independent)</strong><br>
                Environmental advocate, government reform platform
            </label><br>
            <button type="button" onclick="castVote()">Cast Vote</button>
            <button type="button" onclick="clearSelection()">Clear Selection</button>
        </form>
    </section>

    <section id="ledgerSection">
        <h2>üìä Public Voting Ledger</h2>
        <p>This ledger contains anonymized voting records for public verification. Personal information has been stripped to maintain voter privacy.</p>
        <div>
            <span id="totalEntries">0</span> Total Entries
        </div>
        <div>
            <span id="latestBlockHash">N/A</span> Latest Block Hash
        </div>
        <button onclick="refreshLedger()">Refresh Ledger</button>
        <button onclick="exportLedger()">Export as JSON</button>
    </section>

    <section id="verificationSection">
        <h2>‚úÖ Vote Verification</h2>
        <form>
            <h3>Verify Your Vote</h3>
            <label>Vote Receipt ID: <input id="receiptIDInput" type="text" required></label><br>
            <button type="button" onclick="verifyVote()">Verify Vote</button>
            <h3>Verify Election Integrity</h3>
            <button type="button" onclick="verifySignatures()">Verify All Signatures</button>
            <button type="button" onclick="verifyBlockchain()">Verify Blockchain</button>
        </form>
        <div id="verificationResults"></div>
    </section>

    <script src="script.js"></script>
</body>
</html>
